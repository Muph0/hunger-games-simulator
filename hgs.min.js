(function(){function C(a,b){var c=new r(a,b,65);c.b=[new D(b),new w(b,"IntMenuItem"),new t(b,"StringMenuItem"),new w(b,"IntMenuItem"),new t(b,"StringMenuItem"),new w(b,"IntMenuItem"),new t(b,"StringMenuItem"),(new h("")).H({F:!0}),new h("Back")];this.u=function(){c.j=0;return g.ta};this.c=function(){a.N();a.A(5,2);c.c()};this.f=function(){c.f();if(b.s(e.g.kb))return b.B.M.u();if(b.s(e.g.I))switch(c.S().Text){case "Back":return b.B.M.u()}switch(c.b[0].a){case 0:a.da().style.imageRendering="initial";break;case 1:a.da().style.imageRendering="pixelated"}return g.ta}}function E(a,b){var c=document.getElementById("ascii"),d=new r(a,b,10);d.b=[new h("Join game"),(new h("")).H({F:!0}),new h("Edit character"),new h("Options"),new h("About"),new h("Exit")];d.Z=6;this.D=new y(52,16,c);this.D.Ea(null);this.D.i=[255,0,10];this.D.h(" \u2588\u2588\u2591 \u2588\u2588  \u2588    \u2588\u2588  \u2588\u2588\u2588\u2584    \u2588   \u2584\u2588\u2588\u2588\u2588 \u2593\u2588\u2588\u2588\u2588\u2588  \u2588\u2588\u2580\u2588\u2588\u2588  \n\u2593\u2588\u2588\u2591 \u2588\u2588\u2592 \u2588\u2588  \u2593\u2588\u2588\u2592 \u2588\u2588 \u2580\u2588   \u2588  \u2588\u2588\u2592 \u2580\u2588\u2592\u2593\u2588   \u2580 \u2593\u2588\u2588 \u2592 \u2588\u2588\u2592\n\u2592\u2588\u2588\u2580\u2580\u2588\u2588\u2591\u2593\u2588\u2588  \u2592\u2588\u2588\u2591\u2593\u2588\u2588  \u2580\u2588 \u2588\u2588\u2592\u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591\u2592\u2588\u2588\u2588   \u2593\u2588\u2588 \u2591\u2584\u2588 \u2592\n\u2591\u2593\u2588 \u2591\u2588\u2588 \u2593\u2593\u2588  \u2591\u2588\u2588\u2591\u2593\u2588\u2588\u2592  \u2590\u2588\u2588\u2588\u2592\u2591\u2593\u2588  \u2588\u2588\u2593\u2592\u2593\u2588  \u2584 \u2592\u2588\u2588\u2580\u2580\u2588\u2584  \n\u2591\u2593\u2588\u2592\u2591\u2588\u2588\u2593\u2592\u2592\u2588\u2588\u2588\u2588\u2588\u2593 \u2592\u2588\u2588 \u2591  \u2593\u2588\u2588\u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\u2591\u2592\u2588\u2588\u2588\u2588\u2592\u2591\u2588\u2588\u2593 \u2592\u2588\u2588\u2592\n \u2592 \u2591\u2591\u2592\u2591\u2592\u2591\u2592\u2593\u2592 \u2592 \u2592 \u2591 \u2592 \u2591  \u2592 \u2592  \u2591\u2592   \u2592 \u2591\u2591 \u2592\u2591 \u2591\u2591 \u2592\u2593 \u2591\u2592\u2593\u2591\n \u2592 \u2591\u2592\u2591 \u2591\u2591\u2591\u2592\u2591 \u2591\u2591\u2591 \u2591 \u2591 \u2592  \u2591 \u2592\u2591  \u2591   \u2591  \u2591 \u2591  \u2591  \u2591\u2592 \u2591 \u2592\u2591\n \u2591  \u2591\u2591 \u2591 \u2591\u2591\u2591 \u2591 \u2591    \u2591\u2591  \u2591 \u2591 \u2591 \u2591   \u2591    \u2591     \u2591\u2591   \u2591 \n \u2591  \u2591  \u2591   \u2591              \u2591       \u2591    \u2591  \u2591   \u2591     \n");this.D.i=[110,200,225];this.D.h("\n   \u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2557\u2588\u2588\u2557     \u2588\u2588\u2557\u2588\u2588\u2588\u2557   \u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557  \n  \u2588\u2588\u2554\u2550\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d  \n  \u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2557 \u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2557 \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557    \n  \u2588\u2588\u2551   \u2588\u2588\u2551\u2588\u2588\u2551\u255a\u2588\u2588\u2557\u2588\u2588\u2551\u2588\u2588\u2551     \u2588\u2588\u2551\u2588\u2588\u2551\u255a\u2588\u2588\u2557\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255d    \n  \u255a\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551 \u255a\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551\u2588\u2588\u2551 \u255a\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557  \n   \u255a\u2550\u2550\u2550\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d\u255a\u2550\u255d   \u255a\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d  ");this.u=function(){return g.ea};this.c=function(){a.N();var b=this.D;a.A((a.C()-b.C())/2,1);a.Ja(b.da());a.i=[200,200,200];a.ba(b.C()/2-7);a.Ka(b.W()+1);d.c()};this.f=function(){d.f();if(b.s(e.g.I))switch(d.j){case 0:return b.B.La.u();case 2:return b.B.xa.u();case 3:return b.B.Pa.u()}return g.ea}}function F(a,b){var c=new r(a,b,16);c.b=[new h("Login"),new h("Play as guest"),(new h("")).H({F:!0}),new h("Register"),(new h("")).H({F:!0}),new h("Exit")];this.u=function(){return g.qa};this.f=function(){c.f();if(b.s(e.g.I))switch(c.j){case 1:return b.B.Ma.u();case 5:document.location.href="https://www.youtube.com/watch?v=oHg5SJYRHA0"}return g.qa};this.c=function(){a.N();var d=b.B.M.D;a.A((a.C()-d.G)/2,1);a.Ja(d.da());a.A((a.C()-c.G)/2,18);c.c()}}function G(a,b){var c=new r(a,b,20);c.b=[new h("Ready"),new h("Edit character"),new t(b,"Chat:"),(new h("")).H({F:!0}),new h("Leave game")];var d=new r(a,b,35);d.Z=5;d.Ia=2;var f,k=!0,v=!0;this.u=function(){d.b=[];k=!0;return g.pa};this.f=function(){(v=k)?(!b.s(e.g.P)||1===c.j&&c.b[1].m!==c.b[1].a.length||(k=!1),c.f()):(d.f(),b.s(e.g.O)&&(k=!0));if(b.s(e.g.I))switch(c.S().Text){case "Ready":b.client.vb();break;case "Leave game":b.client.Ra()}if(f!==z(b.R.aa)){console.log("Creating new playerlist_menu");console.log(b.R.aa);f=z(b.R.aa);d.b=[];for(var a=0;a<b.R.aa.length;a++)d.b[a]=new H(b,b.R.aa[a]);k&&(v=!1,this.c(),v=!0)}return b.Ya.f(g.pa)};this.c=function(){var b=Math.floor(1*a.C()/3);if(k||v)c.oa=k,a.A(0,0),a.Qa(b),a.ba(3),a.Ka(2),c.c();k&&v||(d.oa=!k,a.A(b,0),a.Qa(a.C()-b),a.ba(1),a.Ka(2),d.c())}}function I(a,b){this.ua=0;this.i=a.i;this.w=a.w;this.G=40;this.f=function(){};this.c=function(){var c=a.i,d=a.w;if(0>this.ua)a.A(a.$a()+Math.floor(40*(Math.sin(b.v/200)+1)/2),a.ab()),a.i=A.lb(b.v/2E3%1),a.h("x");else for(var f=(this.ua+"%"+Array(Math.floor(20)-1).join(" ")).ga(40),k=0;k<f.length;k++)k/f.length<this.ua/100?(a.i=this.w,a.w=this.i):(a.i=this.i,a.w=this.w),a.h(f[k]);a.i=c;a.w=d}}function J(a,b){var c=new r(a,b,40);c.b=[new t(b,"Your name:"),(new h("")).H({F:!0}),new h("Create character"),new h("Back")];this.u=function(){return g.na};this.f=function(){c.f();if(b.s(e.g.I))switch(c.j){case 2:return b.U.K=c.b[0].a?c.b[0].a:"Guest",b.B.xa.u();case 3:return b.B.Oa.u()}return g.na};this.c=function(){a.N();a.A(20,8);c.c()}}function K(a,b){var c=new x,d=new r(a,b,25);d.Sa=[10,5,80];d.b=[];for(var f=0;f<c.l.length;f++)d.b.push((new w(b,c.l.Ga[f])).H({$:1}));d.b.push((new h("")).H({F:!0}));d.b.push((new h("")).H({F:!0}));for(f=0;f<c.o.length;f++)d.b.push((new w(b,c.o.Ga[f])).H({$:1}));d.b.push((new h("")).H({F:!0}));d.b.push(new t(b,"Name:"));d.b.push(new h("Confirm changes"));d.b.push(new h("Randomize"));d.b.push(new h("Cancel"));this.u=function(){d.j=0;this.Ua();return g.la};this.Ua=
    function(){c=new x;c.Ta(b.U);for(var a=0;a<c.l.length;a++)d.b[a].a=c.l[a];for(a=0;a<c.o.length;a++)d.b[a+c.l.length+2].a=c.o[a];d.b[0+c.l.length+c.o.length+3].a=c.K;d.b[0+c.l.length+c.o.length+3].m=c.K.length};this.f=function(){d.f();if(b.s(e.g.I))switch(d.j){case 1+c.l.length+c.o.length+3:return b.U=c,c=null,b.B.M.u();case 2+c.l.length+c.o.length+3:b.U.K=c.K;b.U.tb();this.Ua();break;case 3+c.l.length+c.o.length+3:return b.B.M.u()}for(var a=0;a<c.l.length;a++)c.l[a]=d.b[a].a,d.b[a].ra=d.b[a].a+c.l.V();for(a=0;a<c.o.length;a++){var f=a+c.l.length+2;c.o[a]=d.b[f].a;d.b[f].ra=d.b[f].a+c.o.V()}c.K=d.b[0+c.l.length+c.o.length+3].a;return g.la};this.c=function(){var b=a.i,f=a.w;a.N();a.i=[255,255,255];a.w=[0,90,128];a.A(5,2);a.h(("  Free stat points: "+c.l.V()).ha(d.G+2));a.A(5,4+c.l.length);a.h(("  Free skill points: "+c.o.V()).ha(d.G+2));a.i=b;a.w=f;a.A(5,1);a.h(c);a.A(5,3);d.c()}}function L(a,b){this.D=new y(28,3,document.getElementById("ascii"));this.D.Ea(null);this.D.i=[100,200,255];this.D.h("\u2554\u2550\u2557\u2554\u2550\u2557\u2554\u2557\u2554\u2554\u2557\u2554\u2554\u2550\u2557\u2554\u2550\u2557\u2554\u2566\u2557\u2566\u2554\u2557\u2554\u2554\u2550\u2557\n\u2551  \u2551 \u2551\u2551\u2551\u2551\u2551\u2551\u2551\u2551\u2563 \u2551   \u2551 \u2551\u2551\u2551\u2551\u2551 \u2566\n\u255a\u2550\u255d\u255a\u2550\u255d\u255d\u255a\u255d\u255d\u255a\u255d\u255a\u2550\u255d\u255a\u2550\u255d \u2569 \u2569\u255d\u255a\u255d\u255a\u2550\u255d");var c=new I(a,b);c.ua=-9;var d=new r(a,b,5);d.b=[new h("Back")];this.u=function(a,c){"undefined"===typeof c&&(c=7887);if(a||""===a)b.client=new B(b),b.client.hb(a,c);return g.ka};this.f=function(){switch(b.client.T){case l.Ca:return a.i=[200,200,200],b.B.Na.u();case l.Da:case l.ca:if(b.s(e.g.I))return b.client.Ra(),b.B.M.u()}return b.Ya.f(g.ka)};this.c=function(){a.N();a.ya(Math.floor(a.C()/2-d.G/2));a.za(Math.floor(a.W()/2+6));d.c();switch(b.client.T){case l.Da:a.A((a.C()-this.D.C())/2,a.W()/2-4);a.Ja(this.D.da());var f="to "+b.client.Ab();a.A((a.C()-f.length)/2,a.W()/2);a.h(f);a.A((a.C()-c.G)/2,a.W()/2+3);c.c();break;case l.ca:f="unhandled";if("close"===b.client.Y.type)switch(b.client.Y.code){case 1E3:f="You left the game.";break;case 1006:f=b.client.Error?8E3<b.client.bb()?"Server didn't respond in time. (Timeout)":"Server refused connection. (Connection refused)":"Connection lost. (Server closed)";break;case ErrorCode.ob:f="Wrong client version.";break;case ErrorCode.sb:f="Protocol failure.";break;case ErrorCode.fb:f="Server received broken JSON."}a.A(Math.floor(a.C()/2-f.length/2),a.W()/2-2);a.h(f);if("unhandled"===f){debugger;console.log(b.client);null.end()}}}}function M(a,b){var c=new r(a,b,40);c.b=[new t(b,"Enter IP:"),(new h("")).H({F:!0}),new h("Back")];this.u=function(){c.j=0;c.b[0].a="127.0.0.1";c.b[0].m=c.b[0].a.length;return g.ja};this.f=function(){c.f();if(b.s(e.g.I))switch(c.j){case 0:var a=c.b[0].a,f=a.split(":")[1],a=a.split(":")[0];return b.B.wa.u(a,f);case 2:return b.B.M.u()}return g.ja};this.c=function(){a.N();a.A(a.C()/2-c.G/2,a.W()/2);c.c()}}function N(){this.aa=[];this.Wa=null;this.cb=function(a){for(var b=0;b<a.length;b++){var c=new x;c.Ta(a[b].Aa);a[b].Aa=c}this.aa=a}}function O(a){this.f=function(b){if(a.client.T!==l.Ca)return a.B.wa.u();for(;0<a.client.Ha.length;){var c=a.client.Ha.splice(0,1)[0];c.Bb&&a.R.cb(c.Bb);c.Cb&&null===a.R.Wa&&(a.R.Wa=c.Cb)}return b}}function B(a){function b(a){k.T=l.ca;console.log("Client on_error:");console.log(a);k.Error=a}function c(b){k.T=l.ca;k.Y=b;console.log("Client on_close: (lasted "+Math.floor(k.bb())/1E3+" seconds)");console.log(b);k.Y=b;g=a.v}function d(a){try{var b=JSON.parse(a.data);b.Error&&(k.Error=a,console.log("Client on_message (user error):"),console.log(a),e.close());k.Ha.push(b)}catch(n){console.error(n),console.error("Server sent broken JSON.")}k.Y=a}function f(b){k.T=l.Ca;k.Y=b;e.send(JSON.stringify({protocol:k.qb,U:a.U}))}var k=this;this.qb="0.1";var e,h=0,g=null;this.T=l.ca;this.Error=this.Y=null;this.rb=0;this.Ha=[];this.Ab=function(){return e.url.split("/")[2].split(":")[0]};this.bb=function(){return g?g-h:a.v-h};this.hb=function(g,v){k.T=l.Da;e=new WebSocket("ws://"+g+":"+v);h=a.v;e.onopen=f;e.onmessage=d;e.onclose=c;e.onerror=b};this.vb=function(){var a=JSON.stringify({ready:1});e.send(a)};this.Ra=function(){e.close()}}function t(a,b){u(this,new h(b));this.a="";this.m=0;this.fa=!1;var c=0,d=0,f=0;this.gb=function(a){return"undefined"===typeof a||this.a.length<a?this.a:this.a.substr(Math.min(Math.max(0,this.m-Math.floor(a/2)),this.a.length-a),a)};this.toString=function(a){return this.gb(a)};this.sa=function(){e.X=[]};this.f=function(){for(;e.X.length;){var b=e.X.splice(0,1)[0];1===b.length&&(this.a=this.a.substring(0,this.m)+b+this.a.substring(this.m),this.m++)}a.s(e.g.ia)&&0<this.m&&(this.a=this.a.substring(0,this.m-1)+this.a.substring(this.m),this.m--,f=a.v);a.J(e.g.ia)&&a.v>f+300&&(this.a=this.a.substring(0,this.m-1)+this.a.substring(this.m),this.m--);if(a.s(e.g.I)||a.s(e.g.P))this.m++,d=a.v;a.s(e.g.O)&&(this.m--,c=a.v);a.J(e.g.P)&&a.v>d+300&&this.m++;a.J(e.g.O)&&a.v>c+300&&this.m--;this.fa&&0<this.a.length?this.m=(this.m+this.a.length+1)%(this.a.length+1):(this.m=Math.max(this.m,0),this.m=Math.min(this.m,this.a.length))};this.c=function(a,b){var c=b.S()===this;a.h(this.Text+" ");var d=b.G-1-this.Text.length,f=Math.floor(d/2);a.h(this.toString(d).ga(d));c&&(this.toString(d).length!==d?a.ba(-(this.a.length-this.m)):this.m>f?a.ba(-Math.min(this.a.length-this.m,f)):a.ba(-(d-this.m)),a.ma=!0)}}function h(a){this.Text=a;this.F=!1;this.sa=function(){};this.f=function(){};this.c=function(a,c){a.h(this.Text);if("undefined"!==typeof this.a){var b=this.toString(),b=b.ga(c.G-this.Text.length);a.h(b)}}}function r(a,b,c){this.j=0;this.nb=[255,255,255];this.Sa=[100,0,0];this.b=[];this.G=c;this.Z=Infinity;this.L=0;this.oa=!0;this.Ia=1;this.S=function(){return this.b[this.j]};this.u=function(){this.b[this.j].sa()};this.c=function(){if(0===this.b.length)return a.h("[empty menu]");for(;this.b[this.j].F;)this.j++;var b=this.b.length;Infinity!==this.Z&&(b=Math.min(this.Z,this.b.length));for(var c=a.$a(),k=a.ab(),e=0;e<b;e++){var g=this.b[e+this.L];this.oa&&e+this.L===this.j||""===g.Text&&g.F||(a.A(c,k+e*this.Ia),a.h("  "),g.c(a,this))}this.oa&&this.L<=this.j&&this.j<this.L+b&&(b=a.i,e=a.w,a.i=this.nb,a.w=this.Sa,a.A(c,k+(this.j-this.L)*this.Ia),a.h("> "),this.S().c(a,this),this.S()instanceof t||(a.ma=!1),a.i=b,a.w=e)};this.f=function(){if(0!==this.b.length){var a=this.j;do b.s(e.g.xb)&&this.j--,b.s(e.g.ib)&&this.j++,this.j=(this.j+this.b.length)%this.b.length;while(this.b[this.j].F);Infinity!==this.Z&&0<=this.j&&(this.j<this.L&&this.L--,this.j>=this.L+this.Z&&this.L++);a!==this.j&&this.b[this.j].sa();this.b[this.j].f()}}}function H(a,b){u(this,new h(b.toString()));this.Ba=b;this.f=function(){};this.c=function(b){b.h(this.Ba.Aa.K.ha(12));b.h(this.Ba.Aa.toString().ha(21));b.h(a.client.rb.toString().ha(4));var c=b.w;b.w=this.Ba.Sb?[0,160,0]:[220,0,0];b.h("    ");b.w=c}}function D(a){u(this,new h("Graphics"));this.a=0;this.fa=!0;this.Fa=["Blurred","Pixelated"];this.toString=function(){return this.Fa[this.a]};this.f=function(){(a.s(e.g.I)||a.s(e.g.P))&&this.a++;a.s(e.g.O)&&this.a--;if(this.fa){var b=this.Fa.length;this.a=(this.a+b)%b}else this.a=Math.max(0,this.a),this.a=Math.min(this.Fa.length-1,this.a)};this.c=function(b,c){var d=this===c.S();b.h(this.Text);var f=this.toString();b.h("".ga(c.G-this.Text.length-f.length-(d?4:2)));var k=b.i,g=[60,60,60];d&&(a.J(e.g.O)&&(b.i=g),b.h("< "));b.i=k;b.h(f);d?(a.J(e.g.P)&&(b.i=g),b.h(" >")):b.h("  ");b.i=k}}function w(a,b){u(this,new h(b));this.$=this.a=0;this.ra=Infinity;this.fa=!1;var c=0,d=0,f=0;this.toString=function(){return this.a.toString()};this.sa=function(){f=d=c=a.v};this.f=function(){for(;0<e.X.length;){var b=e.X.splice(0,1)[0];isNaN(b)||(this.a=10*this.a+1*b)}a.s(e.g.ia)&&(this.a=Math.floor(this.a/10),f=a.v);a.J(e.g.ia)&&a.v>f+300&&(this.a=Math.floor(this.a/10));if(a.s(e.g.I)||a.s(e.g.P))this.a++,d=a.v;a.s(e.g.O)&&(this.a--,c=a.v);a.J(e.g.P)&&a.v>d+300&&(this.a++,a.v>d+3E3&&(this.a+=5));a.J(e.g.O)&&a.v>c+300&&(this.a--,a.v>c+3E3&&(this.a-=5));this.fa?(b=this.ra-this.$,this.a=(this.a-this.$+b)%b+this.$):(this.a=Math.max(this.$,this.a),this.a=Math.min(this.ra,this.a))};this.c=function(b,c){var d=c.S()===this;b.h(this.Text);var f=this.toString();b.h("".ga(c.G-this.Text.length-f.length-(d?4:2)));var k=b.i,g=[60,60,60];d&&(a.J(e.g.O)&&(b.i=g),b.h("< "));b.i=k;b.h(f);d?(a.J(e.g.P)&&(b.i=g),b.h(" >")):b.h("  ");b.i=k}}function P(a,b){var c=this,d=g.ea;c.xa=new K(a,b);c.Ma=new J(a,b);c.wa=new L(a,b);c.Pa=new C(a,b);c.La=new M(a,b);c.Oa=new F(a,b);c.Na=new G(a,b);c.M=new E(a,b);c.f=function(){switch(d){case g.ea:d=c.M.f();break;case g.ta:d=c.Pa.f();break;case g.pa:d=c.Na.f();break;case
     g.ka:d=c.wa.f();break;case g.ja:d=c.La.f();break;case g.qa:d=c.Oa.f();break;case g.na:d=c.Ma.f();break;case g.la:d=c.xa.f();break;default:throw Error("Someone just set the state to NaN.");}};c.c=function(){switch(d){case g.ea:c.M.c();break;case g.ta:c.Pa.c();break;case g.pa:c.Na.c();break;case g.ka:c.wa.c();break;case g.ja:c.La.c();break;case g.qa:c.Oa.c();break;case g.na:c.Ma.c();break;case g.la:c.xa.c()}}}function A(){}function Q(a,b){u(this,new p(a,b))}function R(a,b){u(this,new p(a,b))}function S(a,b){u(this,new p(a,b))}function T(a,b){u(this,new p(a,b))}function p(a,b){this.yb=a;this.zb=b}function x(){this.K="Noname";this.l=[1,1,1,1];this.o=[1,1,1,1,1,1,1,1];this.l.Ga=["Strength","Agility","Intelligence","Metabolism"];this.o.Ga="Crafting;Archery;Light Weapons;Guns;Cooking;Sneaking;Running;Climbing".split(";");this.l.V=function(){for(var a=0,b=0;b<this.length;b++)a+=this[b];return 19-a};this.o.V=function(){for(var a=0,b=0;b<this.length;b++)a+=this[b];return 23-a};this.tb=function(){for(var a=0;a<this.l.length;a++)this.l[a]=1;for(a=0;a<this.o.length;a++)this.o[a]=1;for(;0<this.l.V();)a=Math.floor(Math.random()*this.l.length),this.l[a]++;for(;0<this.o.V();)a=Math.floor(Math.random()*this.o.length),this.o[a]++};this.toString=function(){var a=this.l.indexOf(Math.max.apply(Math,this.l)),b=this.o.indexOf(Math.max.apply(Math,this.o));return["Strong","Agile","Inteligent","Undemanding"][a]+" "+"Craftsman Archer Swordsman Gunman Cook Sneak Runner Climber".split(" ")[b]};this.Ta=function(a){for(var b=0;b<this.l.length;b++)this.l[b]=a.l[b];for(b=0;b<this.o.length;b++)this.o[b]=a.o[b];this.K=a.K}}function u(a,b){for(key in b)a[key]=b[key]}function z(a){a=JSON.stringify(a);a=a+a+a+a+a+a;var b=0,c,d,f;if(0===a.length)return b;c=0;for(f=a.length;c<f;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b.toString(36)}function U(a){var b=this,c=[],d=[];this.client=new B(this);this.U=new x;this.Ya=new O(this);this.B=new P(a,this);this.R=new N;this.v=0;this.wb=function(){p.ub();window.requestAnimationFrame(this.Va)};this.Va=function(a){b.v=a;b.f();b.c();window.requestAnimationFrame(b.Va)};this.J=function(a){return c[a]};this.s=function(a){return c[a]&&!d[a]};this.f=function(){a.ma=!1;d=c;c=e.mb();this.B.f()};this.c=function(){this.B.c();a.eb(this.v/200)}}function y(a,b,c){function d(a,b){return"undefined"!==typeof a?a:b}function f(a){return"rgb("+a.slice(0,3).join(",")+")"}var e=this,g=d(a,80),h=d(b,25),l=null,m=null,p=null;this.i=[200,200,200];this.w=[0,0,0];var n=0,q=0;this.$a=function(){return n};this.ya=function(a){if(isNaN(a))throw Error("Value is NaN");n=Math.floor(a)};this.ba=function(a){this.ya(n+a)};this.ab=function(){return q};this.za=function(a){if(isNaN(a))throw Error("Value is NaN");q=Math.floor(a)};this.Ka=function(a){this.za(q+a)};this.ma=!0;this.A=function(a,b){a instanceof Array&&"undefined"===typeof b?(this.ya(d(a[0],n)),this.za(d(a[1],q))):(this.ya(d(a,n)),this.za(d(b,q)))};this.C=function(){return g};this.W=function(){return h};this.pb=function(a,b){function c(){var a=document.createElement("canvas");a.width=d.width;a.height=d.height;var c=a.getContext("2d");c.drawImage(d,0,0);for(var e=c.getImageData(0,0,a.width,a.height),f=0;f<a.width*a.height*4;f+=4)0==e.data[f]&&0==e.data[f+1]&&0==e.data[f+2]&&(e.data[f+3]=0);c.putImageData(e,0,0);p=a;b()}var d=null;if("IMG"===a.nodeName)d=a,c();else if("string"===typeof a)d=new Image,d.onload=c,d.src=a;else throw new TypeError("CanvasConsole.LoadFont: wrong argument 1 - expected instance of HTMLImageElement or string instead of "+typeof a+".");};this.Ea=function(a){l=document.createElement("canvas");l.width=7*g;l.height=12*h;l.style.backgroundColor="darkblue";m=l.getContext("2d");m.yc=!1;if(null===document.body)throw Error("document.body is null - you should call this method later.");null!==a&&(a=d(a,document.body),a.appendChild(l));this.N()};this.eb=function(a){if(this.ma&&0!==Math.floor(a%4)){a=7*n;var b=12*q;m.fillStyle=f(this.i);m.fillRect(a,b+12-3,7,2)}};this.jb=function(a,b,c){var d="\x00\u263a\u263b\u2665\u2666\u2663\u2660\u2022\u25d8\u25cb\n\u2642\u2640\r\u266b\u263c\u25ba\u25c4\u2195\u203c\u00b6\u00a7\u25ac\u21a8\u2191\u2193\u2192\u2190\u221f\u2194\u25b2\u25bc !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00a2\u00a3\u00a5\u20a7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u2310\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c\u2588\u2584\u258c\u2590\u2580\u03b1\u00df\u0393\u03c0\u03a3\u03c3\u00b5\u03c4\u03a6\u0398\u03a9\u03b4\u221e\u03c6\u03b5\u2229\u2261\u00b1\u2265\u2264\u2320\u2321\u00f7\u2248\u00b0\u2219\u00b7\u221a\u207f\u00b2\u25a0\u00a0\u011b\u0161\u010d\u0159\u017e\u00fd\u00e1\u00ed\u00e9\u010f\u0165\u0148\u00fa\u016f\u00f3\u011a\u0160\u010c\u0158\u017d\u00dd\u00c1\u00cd\u00c9\u010e\u0164\u0147\u00da\u016e\u00d3".indexOf(a);a=d%64*7;d=12*Math.floor(d/64);b*=7;c*=12;m.clearRect(b,c,7,12);m.drawImage(p,a,d,7,12,b,c,7,12);m.globalCompositeOperation="source-atop";m.fillStyle=f(this.i);m.fillRect(b,c,7,12);m.globalCompositeOperation="destination-over";m.fillStyle=f(this.w);m.fillRect(b,c,7,12);m.globalCompositeOperation="source-over"};this.h=function(a){if(null!==a){a=a.toString();if(1==a.length){switch(a){case "\n":n=0;q++;break;case "\t":e.h(Array(4-n%4+1).join(" "));break;default:e.jb(a,n,q),n++}n>=e.width&&(n=0,q++);q>=e.height&&(e.Za.drawImage(e.canvas,0,-12),e.Za.fillStyle=f(e.w),e.Za.fillRect(0,12*(e.height-1),7*e.width,12),q=h-1)}1<a.length&&a.split("").forEach(this.h)}};this.N=function(){m.fillStyle=f(this.w);m.fillRect(0,0,7*g,12*h);this.A(0,0)};this.Qa=function(a){m.fillStyle=f(this.w);m.fillRect(7*n,7*q,7*a,300)};this.Ja=function(a){m.drawImage(a,7*n,12*q)};this.da=function(){return l};(function(){c instanceof HTMLElement&&e.pb(c,function(){})})()}var e=new function(){this.g={ia:8,Tab:9,I:13,kb:27,sc:32,nc:33,mc:34,Jb:35,Nb:36,O:37,xb:38,P:39,ib:40,Ib:46,Vb:96,Wb:97,Xb:98,Yb:99,Zb:100,$b:101,ac:102,bc:103,cc:104,dc:105,ic:106,ec:107,hc:108,jc:109,fc:110,gc:111,Gb:188,oc:190,Db:65,Eb:66,Fb:67,Hb:68,E:69,Kb:70,Lb:71,Mb:72,Ob:73,Pb:74,Qb:75,Rb:76,Tb:77,Ub:78,kc:79,lc:80,Q:81,pc:82,qc:83,tc:84,uc:85,vc:86,wc:87,yb:88,zb:89,xc:90};this.X=[];for(var a in this.g);var b=[];for(a in this.g)b[this.g[a]]=!1;this.keyup=function(a){b[a.keyCode]=!1};this.keydown=function(a){b[a.keyCode]=!0};this.keypress=function(a){this.X.push(a.key)};this.mb=function(){return b.slice(0)}};window.KEYBOARD=e;ErrorCode={ob:4001,sb:4002,fb:4003};Object.prototype.H=function(a){for(key in a)this[key]=a[key];return this};String.Xa=Array(80).join(" ");String.prototype.ga=function(a){a=String.Xa.substring(0,a);return"undefined"===typeof this?a:(a+this).slice(-a.length)};String.prototype.ha=function(a){a=String.Xa.substring(0,a);return"undefined"===typeof this?a:(this+a).substring(0,a.length)};window.main=function(){function a(){var a=$(window).width(),b=$(window).height(),f=$("canvas").first(),e=f.width()/f.height();a/b<=e?(f.css("margin-left",0),f.css("width","100%"),f.css("margin-top",(b-f.height())/2+"px")):(f.css("margin-top",0),f.css("width",b*e-10),f.css("margin-left",(a-f.width())/2+"px"))}var b=new y(80,25,document.getElementById("ascii"));b.Ea();$(window).resize(a);a();game=new U(b);game.wb()};p.ub=function(){p.va=[];p.va.push(S);p.va.push(R);p.va.push(T);p.va.push(Q)};A.lb=function(a){function b(a){0>a&&(a+=1);1<a&&--a;return a<1/6?0+6*a:.5>a?1:a<2/3?0+6*(2/3-a):0}return[Math.round(255*b(a+1/3)),Math.round(255*b(a)),Math.round(255*b(a-1/3))]};var g={ea:0,ka:1,ta:2,rc:3,qa:4,na:5,la:6,ja:7,pa:666},l={ca:0,Ca:1,Da:2}})();